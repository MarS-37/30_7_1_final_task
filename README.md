# Итоговое задание 30.7.1 (Final assignment 30.7.1 (HW-04))

# ПРОТЕСТИРОВАНА: MSVC v.143 - VS 2022 C++ 86/64

# Многопоточная сортировка Quicksort с использованием пула потоков
## Обзор
Этот проект реализует многопоточную сортировку Quicksort с использованием кастомного пула
потоков на языке C++. Проект демонстрирует использование многопоточности для повышения 
производительности при сортировке больших объемов данных. Основные компоненты включают 
генерацию случайных данных, управление пулом потоков для выполнения задач и реализацию 
алгоритма Quicksort с поддержкой многопоточности.
## Файлы
`main.cpp`
Главный файл приложения, выполняющий следующие задачи:

## 1. Инициализация:
- Определяет параметры для размера массива и диапазона случайных значений.
- Получает количество доступных аппаратных потоков.
## 2. Генерация данных:
- Использует класс `PayloadGenerator` для создания большого массива, заполненного случайными целыми числами.
## 3. Настройка пула потоков:
- Инициализирует ThreadPool с количеством потоков, равным числу ядер процессора.
## 4. Сортировка:
- Начинает измерение времени выполнения.
- Вызывает многопоточную функцию quicksort, передавая данные, пул потоков и примитивы синхронизации.
## 5. Завершение:
- Ожидает завершения всех задач сортировки.
- Выводит время выполнения и проверяет, отсортирован ли массив.

## `PayloadGenerator.cpp` и `PayloadGenerator.h`
Этот компонент предоставляет метод для генерации вектора случайных целых чисел.
- Метод `generate`: Принимает размер массива, минимальное и максимальное значения в качестве
  входных параметров и возвращает вектор, заполненный случайными целыми числами в заданном диапазоне.
  
## `ThreadPool.cpp` и `ThreadPool.h`
Реализация простого пула потоков, который управляет пулом рабочих потоков для выполнения задач.
- `Конструктор`: Инициализирует пул с заданным количеством потоков и запуска`ет рабочие потоки.
- `Деструктор`: Обеспечивает правильное завершение работы, останавливая все потоки и ожидая их завершения.
- `Метод worker_thread`: Непрерывно извлекает задачи из очереди и выполняет их.
- `Метод enqueue`: Позволяет добавлять задачи в очередь, поддерживая возможность получения результатов
  задач через future.
  
## Функция `quicksort` (в `main.cpp`)
Многопоточная реализация алгоритма Quicksort:
- `Базовый случай`: Если разделяемая часть массива мала или некорректна, функция завершает выполнение.
- `Разделение`: Выбирает опорный элемент, разделяет данные и определяет окончательное положение опорного элемента.
- `Рекурсивная сортировка`: В зависимости от размера разделов, сортировка может выполняться либо в текущем
  потоке, либо задачи добавляются в очередь пула потоков.
- `Обработка завершения`: Используются promise и future для сигнализации о завершении задачи сортировки.

## Примечания
- `Компилятор`: C++, поддерживающий стандарт C++17 или выше.
- `Многопоточность`: Программа использует простую реализацию пула потоков для эффективного управления
  потоками и сокращения времени выполнения.
